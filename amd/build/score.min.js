define("plagiarism_safeassign/score",["exports","jquery","core/str"],(function(_exports,_jquery,_str){var obj;
/**
   * This file is part of Moodle - http://moodle.org/
   *
   * Moodle is free software: you can redistribute it and/or modify
   * it under the terms of the GNU General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * Moodle is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU General Public License for more details.
   *
   * You should have received a copy of the GNU General Public License
   * along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
   *
   * @author    Guillermo Leon Alvarez Salamanca
   * @copyright Copyright (c) 2017 Open LMS / 2023 Anthology Inc. and its affiliates
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};var _default={init:function(avgScore,userId,originalityReportLink){const elementExists=function(selector){return!!(0,_jquery.default)(selector).length},getMessage=function(avgScore,selector){const messageString=(0,_str.get_string)("safeassign_overall_score","plagiarism_safeassign",avgScore);_jquery.default.when(messageString).done((function(s){(0,_jquery.default)(selector).append(s)}))},whenTrue=function(containerSelector,maxIterations){maxIterations=maxIterations||10;const prom=_jquery.default.Deferred();let i=0;var checker=setInterval((function(){i+=1,i>maxIterations?(prom.reject(),clearInterval(checker)):elementExists(containerSelector)&&(prom.resolve(),clearInterval(checker))}),200);return prom.promise()},isFeedbackView=(0,_jquery.default)("#page-mod-assign-grading").length;let fileSelector=".ygtvchildren",onlineSelector=".plagiarism-inline.online-text-div";isFeedbackView&&(fileSelector=".user"+userId+" .ygtvchildren",onlineSelector=".user"+userId+" td div.plagiarism-inline.online-text-div");whenTrue(fileSelector,20).then((function(){!function(selector){if(!elementExists("#safeassign_score_"+userId)){const tree=(0,_jquery.default)(selector),td=(0,_jquery.default)("<td></td>").attr("id","safeassign_text_"+userId);td.addClass("ygtvcell ygtvhtml ygtvcontent");const trow=(0,_jquery.default)("<tr></tr>").addClass("ygtvrow").append(td),table=(0,_jquery.default)("<table></table>").attr("id","safeassign_score_"+userId).append(trow),div=(0,_jquery.default)("<div></div>").addClass("ygtvitem").append(table);if(tree.prepend(div),originalityReportLink){const reporttd=(0,_jquery.default)("<td></td>").attr("id","safeassign_or_"+userId).addClass("ygtvcell ygtvhtml ygtvcontent");reporttd.append(originalityReportLink);const reportrow=(0,_jquery.default)("<tr></tr>").addClass("ygtvrow").append(reporttd);(0,_jquery.default)("#safeassign_score_"+userId).append(reportrow)}getMessage(avgScore,"#safeassign_text_"+userId)}}(fileSelector)}));whenTrue(onlineSelector,20).then((function(){!function(selector){if(!elementExists("#safeassign_online_sub_"+userId)){const el=(0,_jquery.default)(selector).parent(),div=(0,_jquery.default)("<div></div>").attr("id","safeassign_online_sub_"+userId);if(originalityReportLink){const reportdiv=(0,_jquery.default)("<div></div>").attr("id","safeassign_online_or_"+userId);reportdiv.append(originalityReportLink),el.prepend(reportdiv)}el.prepend(div),getMessage(avgScore,"#safeassign_online_sub_"+userId)}}(onlineSelector)}))}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=score.min.js.map